<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Chat</title>
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <!-- Ã‰cran de configuration initial -->
    <div class="setup-container" id="setupContainer">
        <div class="setup-header">
            <h2>ğŸ’¬ Bienvenue dans Mini Chat</h2>
            <p>Rejoignez ou crÃ©ez un salon de discussion</p>
        </div>
        
        <div class="setup-form">
            <div class="setup-field">
                <label for="setupUserId">Votre pseudo :</label>
                <input type="text" id="setupUserId" placeholder="Ex: Xavier" maxlength="15">
                <small>Votre nom dans le salon</small>
            </div>
            
            <div class="setup-field">
                <label for="setupRoomId">Nom du salon :</label>
                <input type="text" id="setupRoomId" placeholder="Ex: famille, gaming, travail..." maxlength="20">
                <small>Nom du salon Ã  rejoindre ou crÃ©er</small>
            </div>
            
            <div class="setup-field">
                <label for="setupRoomPassword">Mot de passe (optionnel) :</label>
                <input type="password" id="setupRoomPassword" placeholder="Laisser vide pour salon public" maxlength="20">
                <small>Protection du salon (optionnel)</small>
            </div>
            
            <div class="setup-actions">
                <button id="joinRoomBtn" class="start-btn">ï¿½ Rejoindre le salon</button>
                <button id="quickDemoBtn" class="skip-btn">âš¡ DÃ©mo rapide (salon test)</button>
            </div>
        </div>
        
        <div class="setup-info">
            <h4>âœ¨ FonctionnalitÃ©s :</h4>
            <ul>
                <li>ï¿½ Discussion multi-utilisateurs</li>
                <li>ğŸ”’ Salons privÃ©s avec mot de passe</li>
                <li>ï¿½ğŸ”— Partage de liens automatique</li>
                <li>ğŸ® DÃ©tection de clÃ©s CD</li>
                <li>ğŸ“‹ Partage du presse-papier</li>
            </ul>
            
            <div class="room-examples">
                <h5>ï¿½ Exemples de salons :</h5>
                <div class="example-rooms">
                    <span class="room-tag">famille</span>
                    <span class="room-tag">gaming</span>
                    <span class="room-tag">travail</span>
                    <span class="room-tag">amis</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Interface de chat principale -->
    <div class="chat-container" id="chatContainer" style="display: none;">
        <div class="chat-header">
            <div class="room-info">
                <h2 id="roomTitle">ğŸ’¬ Salon: ...</h2>
                <small id="roomSubtitle">En attente...</small>
            </div>
            <div class="header-controls">
                <div class="status-indicator">
                    <span class="status-dot offline" id="statusDot"></span>
                    <span class="status-text" id="statusText">Chargement...</span>
                </div>
                <div class="online-count" id="onlineCount" title="Utilisateurs connectÃ©s">
                    <span class="count-number">0</span>
                    <span class="count-icon">ğŸ‘¥</span>
                </div>
                <button class="settings-btn" id="settingsBtn" title="Changer de salon">ğŸšª</button>
            </div>
        </div>
        
        <div class="chat-messages" id="chatMessages">
            <div class="welcome-message">
                Bienvenue dans votre mini chat ! ğŸ‰<br>
                Partagez facilement des liens et des clÃ©s CD.
            </div>
        </div>
        
        <div class="quick-actions">
            <button class="quick-btn" id="shareCurrentTab">ğŸ“„ Partager cette page</button>
            <button class="quick-btn" id="shareClipboard">ğŸ“‹ Partager le presse-papier</button>
        </div>
        
        <div class="quick-suggestions" id="quickSuggestions">
            <!-- Les suggestions seront ajoutÃ©es dynamiquement -->
        </div>
        
        <div class="chat-input-container">
            <div class="input-wrapper">
                <textarea 
                    id="messageInput" 
                    placeholder="Tapez votre message ici... (EntrÃ©e pour envoyer, Shift+EntrÃ©e pour nouvelle ligne)"
                    rows="2"
                ></textarea>
                <button id="sendButton">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                    </svg>
                </button>
            </div>
        </div>
        
        <div class="chat-settings">
            <div class="user-id-section">
                <label for="userId">Votre ID utilisateur:</label>
                <input type="text" id="userId" placeholder="Entrez votre pseudo">
            </div>
            <div class="partner-id-section">
                <label for="partnerId">ID de votre copine:</label>
                <input type="text" id="partnerId" placeholder="Entrez son pseudo">
            </div>
            <div class="share-code-section">
                <button id="generateShareCode" class="quick-btn">ğŸ”— GÃ©nÃ©rer code de partage</button>
                <input type="text" id="shareCodeInput" placeholder="Entrer un code de partage" style="margin-top: 4px; width: 100%; padding: 4px;">
            </div>
            <button id="clearHistory" class="clear-btn">ğŸ—‘ï¸ Vider l'historique</button>
        </div>
    </div>
    
    <!-- Firebase SDK local -->
    <script src="firebase-app.js"></script>
    <script src="firebase-auth.js"></script>
    <script src="firebase-database.js"></script>
    
    <script src="utils.js"></script>
    <script src="firebase-config.js"></script>
    <script src="firebase-loader.js"></script>
    <script src="firebase-manager.js"></script>
    <script src="popup.js"></script>
</body>
</html>